<!--<polymer-element name="cwn-info-link" attributes="name ds">-->

<dom-module id="cwn-info-link">
    <style>
        cwn-info-link span.invalid {
            color: #888;
            font-style: italic;
            vertical-align:super;
        }
        cwn-info-link a {
            vertical-align: top;
        }
        cwn-info-link {
            white-space: nowrap;
            display: inline-block;
        }
    </style>
    <template>
        <span hidden$="{{!valid}}">
            <cwn-app-icon type="{{type}}" width="22" height="22" fillFromType="true"></cwn-app-icon> 
            <a href="{{link}}">{{name}}</a>
        </span>

        <span class="invalid" hidden$="{{valid}}">{{name}}</span>
    </template>
</dom-module>


<script>
    Polymer({
        is : 'cwn-info-link',
        
        published : {
            name : String
        },

        configure : function() {
            return {
                link : '',
                type : '',
                valid : false,
            }
        },

        bind : {
            name : 'onNameChanged'
        },

        ready : function() {
            this.ds = document.querySelector('cwn-datastore');
        },

        onNameChanged : function() {
            if( !this.ds ) return;

            if( !this.ds.lookupMap[this.name] ) {
                this.valid = false;
                return;
            }

            this.valid = true;
            this.type = this.ds.lookupMap[this.name].properties.type;
            this.link = '#info/'+ this.name;
        }

    });
</script>