<polymer-element name="cwn-app">
    <template>
        <style>
            leaflet-map, core-animated-pages {
                height: 100%
            }
        </style>

        <cwn-datastore id="ds" loading="{{loading}}"></cwn-datastore>
        <cwn-app-layout loading="{{loading}}">
            <a right-nav on-tap="{{showFilters}}">Filters</a>
            <cwn-filters id="filters" content legend="{{legend}}"></cwn-filters>

            <core-animated-pages id="pages" content transitions="slide-from-right">
              <cwn-map legend="{{legend}}" data="{{$.ds.data}}" on-selected="{{onFeatureSelected}}"></cwn-map>
              <cwn-info-page id="info" data="{{$.ds.data}}" ></cwn-info-page>
        </cwn-app-layout>

        
    </template>
    <script>
        Polymer('cwn-app', {
            PAGES : {
              MAP : 0,
              INFO : 1
            },

            legend : {
              'Power Plant Node'         : {
                color : '#3366cc',
                google : 'small_red'
              },
              'Agricultural Demand Node' : {
                  color : '#ff9900',
                  google : 'small_yellow'
              },
              'Junction Node'            : {
                  color : '#109618',
                  google : 'small_green'
              },
              'Pump Plant Node'          : {
                  color : '#990099',
                  google : 'small_blue'
              },
              'Water Treatment Node'     : {
                  color : '#0099c6',
                  google : 'small_purple'
              },
              'Surface Storage Node'     : {
                  color : '#dd4477',
                  google : 'measle_brown',
              },
              'Urban Demand Node'        : {
                  color : '#66aa00',
                  google : 'measle_grey'
              },
              'Sink Node'                : {
                  color : '#b82e2e',
                  google : 'measle_white'
              },
              'Groundwater Storage Node' : {
                  color : '#316395',
                  google : 'measle_turquoise'
              },
              'Non-Standard Demand Node' : {
                  color : '#22aa99',
                  google : 'shaded_dot'
              }
            },

           
            showFilters : function() {
                this.$.filters.toggle();
            },

            onFeatureSelected : function(e) {
              this.$.pages.selected = this.PAGES.INFO;
              this.$.info.selected = e.detail;
            }
        });
    </script>
</polymer-element>